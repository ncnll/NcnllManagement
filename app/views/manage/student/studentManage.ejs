<!DOCTYPE html>
<html>
	<head>
		<title> <%= application_name_cn %> </title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<link rel="stylesheet" type="text/css" href="/vendors/ztree_3.5/css/zTreeStyle.css" />

		<!-- <link rel="shortcut icon" type="image/x-icon" href="resources/${icon_name}"/> -->
		<!-- <link rel="stylesheet" type="text/css" href="/css/basic/class/classTypeManage.css" /> -->
		
		<%- include ../common/jqueryEasyUI.js.ejs %>

		<script src="/vendors/ztree_3.5/jquery.ztree.all-3.5.min.js" type="text/javascript">	
		</script>
		<script type="text/javascript" src="/js/basic/student/studentManage.js">
		</script>
	</head>
		
 	<body id="main">
		<div class="easyui-layout" data-options="fit:true">
			<div data-options="region:'west',split:true" title="学员报班管理" style="width: 180px; overflow: auto; ">
				<div class="easyui-accordion" data-options="fit:true,border:false">
			        <ul id="div_allOrganization_tree" class="ztree"></ul>
				</div>
			</div>
			<div data-options="region:'center'" title="" style="overflow: hidden;width:700px;"
			 overflow: auto;>

				<table id="organizationGrid">
				</table>
				<div id="toolbar">
					姓名:
					<input id = "stuName" onblur="findByName()"/>
					<input id = "userId" type = "hidden" />
					是否禁用:
					<input class="easyui-combobox" id="disbale"  data-options="
					panelHeight:'auto',
					valueField: 'value',
					value:'',
					editable:false,
					textField: 'label',
					data: [{
						label: '全部',
						value: ''
					},{
						label: '已启用',
						value: 'false'
					},{
						label: '已禁用',
						value: 'true'
					}]" />
					学员状态:<input class="easyui-combobox" id="stustatus"  data-options="
	 	  		panelHeight:'auto',
					valueField: 'value',
					value:'',
					editable:false,
					textField: 'label',
					data: [{
						label: '全部',
						value: ''
					},{
						label: '已付费',
						value: '1'
					},{
						label: '未付费',
						value: '2'
					},{
						label: '未审核',
						value: '0'
					}]" />

					<a href="javascript:void(0)" onclick="select()" class="easyui-linkbutton" iconCls="icon-search">
						搜索</a>
					<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="newForm()">新建</a>
					<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="editForm()">修改</a>

					<!--<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-Disabled" plain="true" onclick="disableStudent()">禁用</a>-->
				    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroySelectedItems()">删除</a>
			    </div>
				<div id="addstu"   class="easyui-dialog" data-options="closed:'true',buttons:'#dlg-buttons'"  style=" width:350px ;height:250px;" >
					<form id="stu" method="post" >
						<div class="fitem">
							<label>登 录 名：</label>
							<input name="username" id="usernameId" class="easyui-validatebox"  required="true" >
						</div></br>
						<div class="fitem">
							<label>真实名称：</label>
							<input name="fullName" class="easyui-validatebox">
						</div></br>
						<div class="fitem">
							<label>邮&nbsp&nbsp&nbsp&nbsp箱：</label>
							<input name="email" class="easyui-validatebox" >
						</div></br>
						<div class="fitem">
							<label>班级类别：</label>
							<input  id="addclassType" class="easyui-combobox"  data-options="
        							valueField: '_id',
        							editable:false,
      								textField: 'name',
      								editable:false,
      								panelHeight:'auto',
      								onSelect: function(rec){
         							   $.post('/vpi/class/all',{
										 	classType:rec._id,
										 	endDate :new Date()
											},
											function(result){
												if (result.success){
													$('#addclass').combobox('loadData', result.rows).combobox('clear');
												}
											}
										 );


      							  }" />
						</div></br>
						<div class="fitem">
							<label>班&nbsp&nbsp&nbsp&nbsp级：</label>
							<input  id="addclass"  class="easyui-combobox"data-options="
        							valueField: '_id',
        							editable:false,
      								textField: 'name',
      								panelHeight:'auto',editable:false
        						" />
						</div></br>
						<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-ok" onclick="saveStuForm()">保存</a>
						<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#addstu').dialog('close')">取消</a>
					</form>
				</div>

		 		 <div id="dlg" class="easyui-dialog" data-options="closed:'true',buttons:'#dlg-buttons'"  style=" width:auto ;">
			        <form id="fm" method="post" >
						<div  class="fitem">

						<label>班级类别：</label>
						<input  id="classType" class="easyui-combobox"  name="classType" data-options="
        							valueField: '_id',
        							editable:false,
      								textField: 'name',
      								editable:false,
      								panelHeight:'auto',
      								onSelect: function(rec){
         							   $.post('/vpi/class/all',{
										 	classType:rec._id,
										 	endDate :new Date()
											},
											function(result){
												if (result.success){
													$('#class').combobox('loadData', result.rows).combobox('clear');
												}
											}
										 );


      							  }" />
				 </div>
				<div class="fitem">
					<label>班&nbsp&nbsp&nbsp&nbsp级：</label>
					<input  id="class" class="easyui-combobox" name="class" data-options="
        							valueField: '_id',
        							editable:false,
      								textField: 'name',
      								panelHeight:'auto',editable:false
        						" />
				</div></br>

						<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-ok" onclick="saveForm()">保存</a>
						<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#dlg').dialog('close')">取消</a>

			        </form>
			    </div>
			    <!--<div id="dlg-buttons">-->
				    <!--<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-ok" onclick="saveForm()">保存</a>-->
				    <!--<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#dlg').dialog('close')">取消</a>-->
				<!--</div>-->
			</div>
		</div>
		<!--修改学员状态-->
		<div id="status" class="easyui-dialog" data-options="closed:'true',modal:true,buttons:'#dlg-buttons'">
			<form id="update" method="post" >
				<input type="hidden" id="_id"  name="_id" />
				</br>
				请选择:<input type="radio" name="status" value="1" />已付费
				<input type="radio" name="status" value="2" />未付费</br></br>
				<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-ok"  onclick="update()" >确定</a>
				<a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#status').dialog('close')">取消</a>

			</form>
		</div>

	</body>
</html>
